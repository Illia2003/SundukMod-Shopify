{% schema %}
  {
    "name": "Collection Block",
    "tag": "section",
    "class": "collection-block section section--margin",
    "templates": ["index"],
    "settings": [
      {
        "type": "text",
        "id": "title",
        "label": "Title"
      }, {
        "type": "text",
        "id": "button_text",
        "label": "Button Text"
      }, {
        "type": "collection",
        "id": "collection",
        "label": "Collection"
      }
    ],
    "presets": [
      {
        "name": "Collection Block",
        "settings": {
          "title": "Collection",
          "button_text": "Look all products"
        }
      }
    ]
  }
{% endschema %}

<link rel="stylesheet" href="{{ 'collection.css' | asset_url }}">

<div class="collection__container section__container">
  <div class="collection__wrapper section__wrapper section__wrapper--column ">
    <div class="collection__top">
      <h2 class="heading-2 section__title">
        {{ section.settings.title }}
      </h2>
    </div>

    <div class="collection__products">
      {% for product in section.settings.collection.products %}
        {% render 'product-card', product: product, class: "collection__product" %}
      {% endfor %}
    </div>

    <div class="collection__bottom">
      {% render 'button-main', text: section.settings.button_text, url: section.settings.collection.url %}
    </div>
  </div>
</div>